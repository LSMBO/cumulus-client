<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'">
    <link href="css/w3.css" rel="stylesheet">
    <link href="css/colors.css" rel="stylesheet">
    <link href="css/styles.css" rel="stylesheet">
    <link href="css/cloud.css" rel="stylesheet">
    <link href="css/loader.css" rel="stylesheet">
    <title>Cumulus</title>
  </head>
  <body>
    <div class="cloud w3-center" id="cloud_info"><span></span><img src="img/cloud_info.png"/><label></label></div>
    <div class="cloud w3-center" id="cloud_question"><span></span><img src="img/cloud_question.png"/><label></label><div class="w3-bar"><button id="btn_cloudq_1" class="w3-bar-item w3-button color-opposite">Yes</button><button id="btn_cloudq_2" class="w3-bar-item w3-button color-secondary">No</button></div></div>
    <div class="cloud w3-center" id="cloud_warning"><span></span><img src="img/cloud_warning.png"/><label></label><div class="w3-bar"><button id="btn_cloudw" class="w3-bar-item w3-button color-secondary">Yes</button></div></div>
    <span id="tooltiptext">Tooltip text</span>
    <div id="loading" class="w3-modal w3-animate-opacity">
      <div class="w3-modal-content"><span></span><label>Loading...</label></div>
    </div>
    <div id="jobs" class="w3-display-container color-secondary color-primary-border"></div>
    <div id="detail" class="color-primary">
      <header class="w3-row w3-bar color-secondary color-secondary-border" style="display: none;">
        <button id="btnSummary" class="w3-bar-item w3-button color-secondary color-primary-border">Summary</button>
        <button id="btnParameters" class="w3-bar-item w3-button color-secondary color-primary-border">Parameters</button>
        <button id="btnLogs" class="w3-bar-item w3-button color-secondary color-primary-border">Log files</button>
        <button id="btnOutput" class="w3-bar-item w3-button color-secondary color-primary-border">Output files</button>
        <button id="btnSettings" class="w3-bar-item w3-right w3-button color-secondary color-primary-border"><img src="img/settings.svg" /><img class="w3-hide" src="img/settings-alt.svg" /></button>
        <button id="btnStorage" class="w3-bar-item w3-right w3-button color-secondary color-primary-border"><img src="img/storage.png" /><img class="w3-hide" src="img/storage-alt.png" /></button>
      </header>
      <div id="splash" class="color-primary"><img src="img/cumulus.png" /></div>
      <div id="tabs" class="w3-row">
        <div id="tabSummary" class="tab w3-container">
          <div class="w3-row w3-section">
            <label for="txtJobOwner" class="w3-col">Owner</label>
            <input id="txtJobOwner" type="text" disabled class="w3-input w3-border w3-rest" />
          </div>
          <div class="w3-row w3-section">
            <label for="txtJobStatus" class="w3-col">Status</label>
            <input id="txtJobStatus" type="text" disabled class="w3-input w3-border w3-rest" />
          </div>
          <div class="w3-row w3-section">
            <label for="cmbAppName" class="w3-col">Software</label>
            <select id="cmbAppName" class="w3-select w3-border w3-rest"></select>
          </div>
          <div class="w3-row w3-section">
            <label for="cmbStrategy" class="w3-col">Strategy</label>
            <select id="cmbStrategy" class="w3-select w3-border w3-rest"></select>
          </div>
          <div class="w3-row w3-section">
            <label for="txtSelectedHost">Selected host</label>
            <input id="txtSelectedHost" type="text" disabled class="w3-input w3-border w3-rest" />
          </div>
          <div class="w3-row w3-section">
            <label for="txtJobDescription">Description</label>
            <textarea id="txtJobDescription" class="w3-input w3-border w3-rest" rows="5" placeholder="Optional text to give some context to the job, to prevent users from confusing jobs."></textarea>
          </div>
          <div id="divDates" class="w3-row-padding"></div>
          <div class="w3-center">
            <div id="divButtonsNext" class="w3-bar">
                <button id="btnNext" class="w3-button color-opposite" disabled>Set parameters</button>
            </div>
          </div>
          <div class="w3-center">
            <div id="divButtonsSummary" class="w3-bar">
                <button id="btnClone" class="w3-button color-opposite">Clone</button>
                <button id="btnCancel" class="w3-button color-secondary">Cancel job</button>
                <button id="btnDelete" class="w3-button color-secondary">Delete job</button>
              </div>
          </div>
        </div>
        <!-- Tab 2: specific parameters for the selected app name -->
        <div id="tabParameters" class="tab">
          <form id="formParameters"></form>
          <div class="w3-center">
            <button id="btnStart" class="w3-button w3-block w3-margin-top color-opposite">Start the job</button>
          </div>
        </div>
        <!-- Tab 3: show the content of stdout and stderr, add clipboard buttons -->
        <div id="tabLogs" class="tab">
          <div class="w3-row-padding">
            <div class="w3-half">
              <label for="stdout">Output log (stdout)</label>
              <textarea id="stdout" class="w3-input w3-border color-opposite-border" readonly></textarea>
              <a id="copyStdout" class="w3-center" href="#">Copy to clipboard</a><label>✔</label>
            </div>
            <div class="w3-half">
              <label for="stderr">Error log (stderr)</label>
              <textarea id="stderr" class="w3-input w3-border color-accent-border" readonly></textarea>
              <a id="copyStderr" class="w3-center" href="#">Copy to clipboard</a><label>✔</label>
            </div>
          </div>
        </div>
        <!-- Tab 4: list of output files, users should be able to download the files they want -->
        <div id="tabOutput" class="tab">
          <h3 id="outputSummary"></h3>
          <div id="treeview" class="color-primary color-primary-border"></div>
          <div><a id="aSelect" href="#">[Select all]</a>&nbsp;<a id="aUnselect" href="#">[Unselect all]</a>&nbsp;<a id="aExpand" href="#">[Expand all]</a>&nbsp;<a id="aCollapse" href="#">[Collapse all]</a></div>
          <div class="w3-center">
            <button id="btnOutputDownload" class="w3-button w3-block w3-margin-top color-opposite">Download selected files</button>
          </div>
          <div id="downloadProgress" class="color-primary-light">
            <div id="downloadProgressBar" class="color-primary-dark" style="width: 0%;"></div>
          </div> 
        </div>
        <!-- Extra tab: the global settings -->
        <div id="tabSettings">
          <h3>Cumulus configuration</h3>
          <div class="w3-row w3-section">
            <label for="txtSettingsNbJobs" class="w3-col">Number of jobs to display: By default Cumulus will only display the 100 last jobs</label>
            <input id="txtSettingsNbJobs" type="number" class="w3-input w3-border w3-rest" value="" min="-1" step="1" placeholder="Default is 100; use -1 to show all the jobs" />
          </div>
          <div class="w3-row w3-section">
            <label for="txtSettingsRefreshRate" class="w3-col">Refresh rate: Number of seconds between each refresh of the job list and job status (minimal value is 5 seconds)</label>
            <input id="txtSettingsRefreshRate" type="number" class="w3-input w3-border w3-rest" value="" min="5" step="1" placeholder="Number of seconds between each refresh of the job list and job status (minimal value is 5 seconds)" />
          </div>
          <div class="w3-row w3-section">
            <label for="cmbSettingsDefaultStrategy" class="w3-col">Default strategy</label>
            <select id="cmbSettingsDefaultStrategy" class="w3-select w3-border w3-rest"></select>
          </div>
          <div class="w3-row w3-section">
            <label for="txtSettingsDefaultRawFilesPath" class="w3-col">Default path for RAW files</label>
            <input id="txtSettingsDefaultRawFilesPath" type="text" class="w3-input w3-border w3-rest" value="" placeholder="" />
          </div>
          <div class="w3-row w3-section">
            <label for="txtSettingsDefaultFastaFilesPath" class="w3-col">Default path for FASTA files</label>
            <input id="txtSettingsDefaultFastaFilesPath" type="text" class="w3-input w3-border w3-rest" value="" placeholder="" />
          </div>
          <div class="w3-row w3-section">
            <label for="txtSettingsServerAddress" class="w3-col">Cumulus server IP address (do not change this value unless you are certain!)</label>
            <input id="txtSettingsServerAddress" type="text" class="w3-input w3-border w3-rest" value="" placeholder="Address of the server, do not change this value unless you are certain!" />
          </div>
          <div class="w3-row w3-section">
            <label for="txtSettingsServerPort" class="w3-col">Cumulus server port (do not change this value unless you are certain!)</label>
            <input id="txtSettingsServerPort" type="text" class="w3-input w3-border w3-rest" value="" placeholder="Port of the server, do not change this value unless you are certain!" />
          </div>
          <div class="w3-row w3-section">
            <label for="txtSettingsRsyncAddress" class="w3-col">RSync agent IP address (do not change this value unless you are certain!)</label>
            <input id="txtSettingsRsyncAddress" type="text" class="w3-input w3-border w3-rest" value="" placeholder="Address of the RSync agent, do not change this value unless you are certain!" />
          </div>
          <div class="w3-row w3-section">
            <label for="txtSettingsRsyncPort" class="w3-col">RSync agent port (do not change this value unless you are certain!)</label>
            <input id="txtSettingsRsyncPort" type="text" class="w3-input w3-border w3-rest" value="" placeholder="Port of the RSync agent, do not change this value unless you are certain!" />
          </div>
          <div class="w3-center">
            <div id="divButtonsSummary" class="w3-bar">
              <button id="btnSettingsOk" class="w3-button color-opposite">Save settings</button>
              <button id="btnSettingsReset" class="w3-button color-secondary">Reset settings</button>
              <button id="btnSettingsLicense" class="w3-button color-primary-border">Display the license</button>
            </div>
          </div>
          <div class="w3-row w3-section w3-hide"><textarea id="txtSettingsLicense" class="w3-input w3-border" readonly rows="25"></textarea></div>
        </div>
        <div id="tabStorage">
          <h3>Cumulus remote storage content</h3>
          <button id="btnStorageRefresh" class="w3-button color-opposite">Refresh</button>
          <input type="text" id="txtStorageSearch" class="w3-input w3-border" placeholder="Search for a file" />
          <table class="w3-table-all"></table>
        </div>
      </div>
    </div>
    <script type='module' src="client/renderer.js"></script>
  </body>
</html>
